{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst inputSearch = document.querySelector('.js_input');\nconst searchButton = document.querySelector('.js_searchButton');\nconst listDataContainer = document.querySelector('.js_listData');\nconst favListsData =document.querySelector('.js_favListsData');\n\nlet listsData = [];\n//7.a.creamos un nuevo array para las series favoritas:\nlet favouriteListsData = [];\n\nfunction paintFavouriteListData() {\n  let html2 = '';\n  for(const favData of favouriteListsData){\n    if (favData.show.image !== null){\n      html2 += `<li id=\"${favData.show.id}\" class=\"js_liListData\">`;\n      html2 += `<div class=\"js_listImageContainer\">`;\n      html2 += `<h3>${favData.show.name}</h3>`;\n      html2 += `<img src=\"${favData.show.image.medium}\" class=\"js_image\"/>`;\n      html2 += `</div>`;\n      html2 += `</li>`;\n    }else{\n      html2 += `<li id=\"${favData.show.id}\" class=\"js_liListData\"> `;\n      html2 += `<div class=\"js_listImageContainer\">`;\n      html2 += `<h3>${favData.show.name}</h3>`;\n      html2 += `<img src=\"https://via.placeholder.com/210x295/ffffff/666666/?text=TV}\" class=\"js_image\"/>`;\n      html2 += `</div>`;\n      html2 += `</li>`;\n    }\n  }\n  favListsData.innerHTML = html2 ;\n  listenListData();\n}\n//7. creamos la función manejadora del click sobre cada elemento:\nfunction handleClickListData(ev){\n  const selectedElement =parseInt(ev.currentTarget.id);\n  //7.b buscamos aquellos elementos del listData que tengan el id de opcion clickada por el usuario:\n  const selectedSerieId = listsData.find ((listData)=>{\n    return listData.show.id === selectedElement;\n  });\n  //7.d hemos de hacer que no se añada al array una serie ya seleccionada:\n  const isFavourite = favouriteListsData.findIndex ((fav)=>{\n    return fav.show.id === selectedElement;\n  });\n  //7.c añadimos los elementos clickados al array de favoritos siempre que su index===-1:\n  if(isFavourite===-1){\n    favouriteListsData.push(selectedSerieId);\n  }else{//eliminamos el que ya esté añadido:\n    favouriteListsData.splice(isFavourite,1);\n  }paintFavouriteListData();\n  paintListData();\n}\n\n\n//8. buscamos si el elemento es o no ya un favorito )arriba):\n\n\n//6.hemos de escuchar el click sobre cada elemento de la lista:\nfunction listenListData (){\n  const listsDataElement=document.querySelectorAll('.js_liListData');\n  for(const listDataElement of listsDataElement){\n    listDataElement.addEventListener('click', handleClickListData);\n  }\n}\n//9. creamos una función que vuelva a verificar si el li es o no favorito, para añadirle la clase:\nfunction liFav(listData){\n  const isFavourite = favouriteListsData.find ((fav) =>{\n    return fav.show.id ===  listData.show.id;\n  });\n  if (isFavourite === undefined){\n    return false;\n  }else {\n    return true;\n  }\n}\n\n//5.definimos la función que pinta los datos de la lista:\nfunction paintListData() {\n  let html = '';\n  //9.1 creamos una variable que recoge la clase aplicada cuando sea marcado como favorito:\n  let favClass= '';\n  for(const listData of listsData){\n    //creamos una constante y creamos la condición por la que sólo is es favorita,  será añadida la clase.\n    const isFav = liFav(listData);\n    if(isFav){\n      favClass='clickSeries';\n    }else{\n      favClass='';\n    }\n    if (listData.show.image !== null){\n      html += `<li id=\"${listData.show.id}\" class=\"js_liListData ${favClass}\">`;\n      html += `<div class=\"js_listImageContainer\">`;\n      html += `<h3>${listData.show.name}</h3>`;\n      html += `<img src=\"${listData.show.image.medium}\" class=\"js_image\"/>`;\n      html += `</div>`;\n      html += `</li>`;\n    }else{\n      html += `<li id=\"${listData.show.id}\" class=\"js_liListData\"> `;\n      html += `<div class=\"js_listImageContainer\">`;\n      html += `<h3>${listData.show.name}</h3>`;\n      html += `<img src=\"https://via.placeholder.com/210x295/ffffff/666666/?text=TV}\" class=\"js_image\"/>`;\n      html += `</div>`;\n      html += `</li>`;\n    }\n  }\n  listDataContainer.innerHTML = html ;\n  listenListData();\n}\n//10.a añadimos la info al LS:\nfunction setInLocalStorage (){\n  const stringFavouriteListsData =  JSON.stringify(favouriteListsData);\n  localStorage.setItem ('favouriteListsData', stringFavouriteListsData);\n}\n\n//10.creamos una función que recoge lo que viene del local storage:\nfunction getFromApi(){\n  let inputValue = inputSearch.value.toLowerCase();\n  //1.solicitamos al api los datos:\n  fetch(`//api.tvmaze.com/search/shows?q=${inputValue}`)\n    .then((response) => response.json())\n    .then((data) => {\n      listsData = data;\n      //4.llamamos a la función que pintará los datos de la lista:\n      paintListData();\n      setInLocalStorage();\n    });\n}\n//10.b creamos una función que nos permita llamar a la info guardada en el LS:\nfunction getLocalStorage (){\n  const localStorageListsData = localStorage.getItem ('favouriteListsData');\n  if(localStorageListsData ===null){\n    getFromApi();\n  }else{\n    const arrayListsData = JSON.parse (localStorageListsData);\n    favouriteListsData = arrayListsData;\n    paintFavouriteListData();\n    paintListData();\n  }\n}\n//3. creamos la función manejadora del botón de búsqueda:\nfunction handleSearchButton(ev) {\n  ev.preventDefault ();\n  getFromApi();\n}\n//2.creamos evento sobre el botón de búsqueda:\nsearchButton.addEventListener('click', handleSearchButton);\n\n//12.ejecutamos la función que llama a lo guardado en el ls:\ngetLocalStorage();\n\n\n"]}